-- تعريف متغير لحالة السكربت
local scriptActive = false

-- دالة لتحديد لون اللاعب بناءً على العناصر التي يحملها
local function getRoleColor(plr)
    if (plr.Backpack:FindFirstChild("Knife") or plr.Character:FindFirstChild("Knife")) then
        return Color3.new(1, 0, 0)
    elseif (plr.Backpack:FindFirstChild("Gun") or plr.Character:FindFirstChild("Gun")) then
        return Color3.new(0, 0, 1)
    else
        return Color3.new(0, 1, 0)
    end
end

-- دالة لتشغيل السكربت
local function runScript()
    while scriptActive do
        for _, v in pairs(game.Players:GetChildren()) do
            if v ~= game.Players.LocalPlayer and v.Character and not v.Character:FindFirstChild("Highlight") then
                local highlight = Instance.new("Highlight", v.Character)
                highlight.FillTransparency = 0.5
                highlight.OutlineTransparency = 0.5
                highlight.FillColor = getRoleColor(v)
            elseif v ~= game.Players.LocalPlayer and v.Character and v.Character:FindFirstChild("Highlight") then
                v.Character.Highlight.FillColor = getRoleColor(v)
            end
        end
        wait(0.1)
    end
end

-- إنشاء واجهة المستخدم
local ScreenGui = Instance.new("ScreenGui")
local ToggleButton = Instance.new("TextButton")

ScreenGui.Parent = game.CoreGui
ScreenGui.Name = "ToggleScriptGui"

ToggleButton.Parent = ScreenGui
ToggleButton.Size = UDim2.new(0, 200, 0, 50)
ToggleButton.Position = UDim2.new(0.5, -100, 0.5, -25)
ToggleButton.Text = "تشغيل السكربت"
ToggleButton.BackgroundColor3 = Color3.new(1, 1, 1)

-- دالة لتبديل حالة السكربت وتحديث نص الزر
local function toggleScript()
    scriptActive = not scriptActive
    if scriptActive then
        ToggleButton.Text = "إيقاف السكربت"
        runScript()
    else
        ToggleButton.Text = "تشغيل السكربت"
    end
end

-- ربط حدث النقر على الزر بتبديل حالة السكربت
ToggleButton.MouseButton1Click:Connect(toggleScript)
