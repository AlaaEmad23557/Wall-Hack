-- متغير لتتبع حالة السكربت
local scriptActive = false

-- دالة لتحديد لون اللاعب بناءً على العناصر التي يحملها
local function getRoleColor(plr)
    if (plr.Backpack:FindFirstChild("Knife") or plr.Character:FindFirstChild("Knife")) then
        return Color3.new(1, 0, 0)
    elseif (plr.Backpack:FindFirstChild("Gun") or plr.Character:FindFirstChild("Gun")) then
        return Color3.new(0, 0, 1)
    else
        return Color3.new(0, 1, 0)
    end
end

-- دالة لتشغيل الـ wall hack
local function enableWallHack()
    while scriptActive do
        for _, v in pairs(game.Players:GetChildren()) do
            if v ~= game.Players.LocalPlayer and v.Character and not v.Character:FindFirstChild("Highlight") then
                local highlight = Instance.new("Highlight", v.Character)
                highlight.FillTransparency = 0.5
                highlight.OutlineTransparency = 0.5
                highlight.FillColor = getRoleColor(v)
            elseif v ~= game.Players.LocalPlayer and v.Character and v.Character:FindFirstChild("Highlight") then
                v.Character.Highlight.FillColor = getRoleColor(v)
            end
        end
        wait(0.1)
    end
end

-- دالة لإيقاف الـ wall hack
local function disableWallHack()
    for _, v in pairs(game.Players:GetChildren()) do
        if v.Character and v.Character:FindFirstChild("Highlight") then
            v.Character.Highlight:Destroy()
        end
    end
end

-- دالة لتبديل حالة السكربت
local function toggleScript()
    scriptActive = not scriptActive
    if scriptActive then
        enableWallHack()
    else
        disableWallHack()
    end
end
